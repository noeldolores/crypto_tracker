<!doctype html>

<html>
  <link rel="stylesheet" href="{{ url_for('static', filename='style_favorites.css') }}">

  <head> 
    <title>Cryptocurrency</title> 
  </head> 

  <body id="myFrame" class="flexContainer">
    <form method="POST" autocomplete="off" class="searchContainer"> 
      <h1>Cryptocurrency</h1>
      <div class="form-group">
        <input type="text" class="line-input" name="coin_query" placeholder="coin name or symbol">
      </div>
      <div class="form-group">                                                        
        <button type="submit" class="btn btn-light text-primary btn-block">SEARCH</button>
      </div>
    </form>

    <div class="tableContainer">
      {% if favorites_list != None %}
        {%for i in range(0, favorites_list|length)%}
          <table class="tableItem" border=2>
            <thead>
              <tr>
                <th align="left">{{favorites_list[i]['name']}}</th>
                <th align="right">{{favorites_list[i]['symbol']}}</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left">Current Price</td>
                <td align="right">{{favorites_list[i]['price']}}</td>
              </tr>
              <tr>
                <td align="left">24-Hour Change</td>
                <td align="right" class="num">{{favorites_list[i]['percent_change_24h']}} %</td>
              </tr>
              <tr>
                <td align="left">7-Day Change</td>
                <td align="right" class="num">{{favorites_list[i]['percent_change_7d']}} %</td>
              </tr>
              <tr>
                <td align="left">30-Day Change</td>
                <td align="right" class="num">{{favorites_list[i]['percent_change_30d']}} %</td>
              </tr>
            </tbody>
            <tfoot>
              <tr><td align='center' colspan='2'>
                <form method='post'>
                  <button type='submit' name='remove_favorite' value={{favorites_list[i]['name'].lower()}},{{favorites_list[i]['symbol'].lower()}}>Remove {{favorites_list[i]['symbol']}}</button>
                <form>
              </td></tr>
            </tfoot>  
          </table>
        {%endfor%}
      {% endif %}
    </div>

    <script>
      document.getElementById("myFrame").onload = function() {output()};

      function output() {
        var targets = document.getElementsByClassName('num');
        for( var i in targets ) {
          if (parseFloat(targets[i].innerText) / 100.0 >= 0) {
            targets[i].style.color = "green";
          } else {
            targets[i].style.color = "red";
          }
        }
      }
      output();
    </script>
  
  </body>     
</html>