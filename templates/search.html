<!doctype html>

<html>
  <link rel="stylesheet" href="{{ url_for('static', filename='style_search.css') }}">
  
  <head> 
    <title>Cryptocurrency</title> 
  </head> 

  <body class = "flex-stack">
    <form id ="content" method="POST" autocomplete="off" class="module-1"> 
      <div class="form-inline">
        <h1>Cryptocurrency</h1>
        <div class="form-group">
          <input type="text" class="line-input" name="coin_query" placeholder="coin name or symbol" required>
        </div>
      <div class="form-group">                                                        
        <button type="submit" class="btn btn-light text-primary btn-block" value="Submit">SEARCH</button>
      </div>
    </form>

    <div class="module-2">
      {% if result == None %}
        {% if bad_query %}
          <h2>"{{bad_query}}" is not valid. Please try a new search.</h2>
        {% endif %}
      {% else %}
      <table style="width: 100%;" class="result" border="2" id="myFrame">
        <tr>
          <th align="left">{{ result.data['name'] }}</th>
          <th align="right">{{ result.data['symbol'] }}</th> 
        </tr>
        <tr>
          <td align="left">Current Price: </td>
          <td align="right">{{ result.data['price'] }}</td>
        </tr>
        <tr>
          <td align="left">24-Hour Change:</td>
          <td class="num" align="right">{{ result.data['percent_change_24h'] }}%</td>
        </tr>
        <tr>
          <td align="left">7-Day Change:</td>
          <td class="num" align="right">{{ result.data['percent_change_7d'] }}%</td>
        </tr>
        <tr>
          <td align="left">30-Day Change:</td>
          <td class="num" align="right">{{ result.data['percent_change_30d'] }}%</td>
        </tr>
      </table>
      {% endif %}
    </div>

    <script>
      document.getElementById("myFrame").onload = function() {output()};

      function output() {
        var targets = document.getElementsByClassName('num');
        for( var i in targets ) {
          if (parseFloat(targets[i].innerText) / 100.0 >= 0) {
            targets[i].style.color = "green";
          } else {
            targets[i].style.color = "red";
          }
        }
      }

      output();
    </script>
  
  </body>     
</html>